---
title: Spree 3.7.0
section: version
---

## Major/New Features

## Installation

### Add Spree gems to Gemfile

```ruby
gem 'spree', '~> 3.7.0.rc1'
gem 'spree_auth_devise', '~> 3.3'
gem 'spree_gateway', '~> 3.3'
```

### Run `bundle install`

### Use the install generators to set up Spree

```shell
rails g spree:install --user_class=Spree::User
rails g spree:auth:install
rails g spree_gateway:install
```

## Upgrade

[Spree 3.6 to 3.7 upgrade guide](https://github.com/spree/spree/blob/master/guides/content/developer/upgrades/three-dot-six-to-three-dot-seven.md)

## Noteworthy changes

Also please review each of the noteworthy changes, and ensure your customizations
or extensions are not effected. If you are affected by a change, and have any
of your own tips please submit a PR to help the next person!

* Dropped support for Ruby 2.2

  [Spark Solutions](https://github.com/spree/spree/pull/8866)

* Support multiple currencies for `Store Credits` management in Admin Panel

  [Spark Solutions](https://github.com/spree/spree/pull/8912)

* Added information if Product is backorderable on Product page

  [Spark Solutions](https://github.com/spree/spree/pull/8438)

* Improved OmniChannel support in the Admin Panel

  [Spark Solutions](https://github.com/spree/spree/pull/8892)

* Improved error handling for XHR requests in the Admin Panel

  [Vernon de Goede](https://github.com/spree/spree/pull/9089)

* `Order` is now associated to `Store`, presence of `Store` is required for validation

  [Spark Solutions](https://github.com/spree/spree/pull/8926)

* `Order` now has to have `currency` value set

  [Spark Solutions](https://github.com/spree/spree/pull/8927)

* Made `CreditCard` deleted softly by default

  [Spark Solutions](https://github.com/spree/spree/pull/9054)

* Payment `source` needs to be present (validation can be turned off via `source_required?` in `PaymentMethod`)

  [Spark Solutions](https://github.com/spree/spree/pull/9054)

* Added `StockLocation#name` unique validation

  [himanshumishra31](https://github.com/spree/spree/pull/8804)

* Added `FulfilmentChanger` class

  [Spark Solutions](https://github.com/spree/spree/pull/8725)

* Extended `OrderPromotion` model

  [Spark Solutions](https://github.com/spree/spree/pull/9126/commits/cdbcef82c3b90a9b07d107f7eb9cbea04dbe7266)

* Added `ShippingRate#final_price` method

  [Spark Solutions](https://github.com/spree/spree/commit/b55ac6e01f3cba9c4b7f4409de767646ff5f7bf7#diff-f679c11eac90d5fa687247a06a0de8db)

* Added Shipment#free? method

  [Spark Solutions](https://github.com/spree/spree/commit/5efa747f66c07beab6742d3b41e721c7727a435d#diff-f679c11eac90d5fa687247a06a0de8db)

* Added `Product#default_variant` and `Product#default_variant_id` methods

  [Spark Solutions](https://github.com/spree/spree/commit/0ec65dba11ccd969efd3944c76f3befb5a8fbcaa#diff-f679c11eac90d5fa687247a06a0de8db)

* Replaced `sass` with `sassc`

  [joshRpowell](https://github.com/spree/spree/pull/9168)

* Replaced `jquery.cookie` with `js.cookie`

  [Spark Solutions](https://github.com/spree/spree/pull/8758)

* Fixed deprecation warning: `BigDecimal.new() is deprecated`

  [Deepak Mahakale](https://github.com/spree/spree/pull/8897)

* Fixed displaying currency in `Admin Panel` -> `Return Authorizations`

  [Spark Solutions](https://github.com/spree/spree/pull/9005)

* Fixed all deprecations of Ruby Money 6.13+

  [Spark Solutions](https://github.com/spree/spree/pull/9036)

* Fallback to `Order#currency` if there's no currency set for `Adjustment`

  [Spark Solutions](https://github.com/spree/spree/commit/04d4c94d30feb770ff4b14db8d7a597888535676#diff-f679c11eac90d5fa687247a06a0de8db)

* Renamed `Order#guest_token` to `Order#token`

  [Spark Solutions](https://github.com/spree/spree/pull/8826)

* Renamed `Admin::GeneralSettingsHelper` to `Admin::CurrencyHelper`

  [Spark Solutions](https://github.com/spree/spree/pull/8912)

* Renamed `TaxonIcon` to `TaxonImage`

  [Spark Solutions](https://github.com/spree/spree/pull/8879)

* Deprecated `OrderContents` and replaced with several `Cart` services (eg. `Cart::AddItem`)

  [Spark Solutions](https://github.com/spree/spree/pull/8732/commits/f86b4c2c4d3fb468038bfb99389490be73ba998c)

* Deprecated `Order#add_store_credit_payments` in favor of `Checkout::AddStoreCredit` service

  [Spark Solutions](https://github.com/spree/spree/pull/9146)

* Deprecated `Order#remove_store_credit_payments` in favor of `Checkout::RemoveStoreCredit` service

  [Spark Solutions](https://github.com/spree/spree/pull/9152)

* Deprecated `OrdersController#populate` and `OrdersController#populate_redirect`

  [Spark Solutions](https://github.com/spree/spree/pull/9050/commits/215cb4391c574136f87824771e14ab211d6cf59c)

* Deprecated `Address#same_as?` in favour of `Address#==`

  [Spark Solutions](https://github.com/spree/spree/pull/8386)

* Deprecated `Order#add register_line_item_comparison_hook` (please use `Rails.application.config.spree.line_item_comparison_hooks << hook` instead)

  [Spark Solutions](https://github.com/spree/spree/commit/0a525ccab9ea0bc52cc4e249d53b38df6f231691)

* Deprecated `ControllerHelpers::RespondWith`

  [Spark Solutions](https://github.com/spree/spree/pull/9081)

* Deprecated `BaseHelper#variant_options`

  [Spark Solutions](https://github.com/spree/spree/pull/9105)

* Removed previously deprecated `Spree::Core::EnvironmentExtension`

  [Spark Solutions](https://github.com/spree/spree/pull/8782)

* Removed previously deprecated `ControllerHelpers::Common#render_404`

  [Spark Solutions](https://github.com/spree/spree/pull/8782)

* Removed previously deprecated `EmailValidator`

  [Spark Solutions](https://github.com/spree/spree/pull/9029)

* Removed previously deprecated `NavigationHelper#icon`

  [Spark Solutions](https://github.com/spree/spree/pull/9121)

* Removed previously deprecated `FrontendHelper#breadcrums`

  [Spark Solutions](https://github.com/spree/spree/pull/9121)

* Removed `Product#distinct_by_product_ids`

  [Spark Solutions](https://github.com/spree/spree/commit/960b211026fbec0095f774b69c78dea64559a6c3#diff-f679c11eac90d5fa687247a06a0de8db)

* Bumped `highline` dependency to `2.0.x`

  [Chamnap Chhorn
](https://github.com/spree/spree/pull/9079)

* Bumped `paperclip` dependency to `6.1.x`

  [Josh Powell](https://github.com/spree/spree/pull/9028)

* Bumped `bootstrap-sass` to `3.4.x`

  [Spark Solutions](https://github.com/spree/spree/pull/9168)

## Full Changelog

You can view the full changes using [Github Compare](https://github.com/spree/spree/compare/3-6-stable...3-7-stable).
