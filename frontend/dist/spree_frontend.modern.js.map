{"version":3,"file":"spree_frontend.modern.js","sources":["../app/javascript/controllers/coupon_code_controller.js","../app/javascript/index.js"],"sourcesContent":["import { Controller } from 'stimulus'\n// import { makeClient } from '@spree/storefront-api-v2-sdk/dist/client'\n\nexport default class extends Controller {\n  static targets = [ 'code', 'resultText', 'resultIcon' ]\n\n  get code() {\n    return this.codeTarget.value.trim()\n  }\n\n  set code(value) {\n    this.codeTarget.value = value\n  }\n\n  initialize() {\n    // this.apiClient = makeClient({\n    //   host: 'http://localhost:3000'\n    // })\n  }\n\n  apply() {\n    if (!this.code) return\n\n    window.SpreeAPI.Storefront.applyCouponCode(\n      this.code,\n      () => this.handleSuccess(),\n      (error) => this.handleError(error)\n    )\n  }\n\n  remove() {\n    window.SpreeAPI.Storefront.removeCouponCode(\n      this.code,\n      () => this.handleSuccess(),\n      (error) => this.handleError(error)\n    )\n  }\n\n  handleError(error) {\n    this.code = null\n    this.element.classList.add('error')\n    this.resultTextTarget.classList.add('alert-error')\n    this.resultTextTarget.innerHTML = error\n    this.resultIconTarget.src = Spree.translations.coupon_code_error_icon\n  }\n\n  handleSuccess() {\n    this.code = null\n    this.element.classList.remove('error')\n    this.resultTextTarget.classList.remove('alert-error')\n    this.resultIconTarget.remove()\n    this.resultTextTarget.classList.add('alert-success')\n    this.resultTextTarget.innerHTML = Spree.translations.coupon_code_applied\n    window.location.reload()\n  }\n}\n","import { Application } from \"stimulus\"\nimport * as Controllers from './controllers'\n\nconst application = Application.start()\napplication.register('coupon-code', Controllers.CouponCodeController)\n\nexport default {\n  start() {\n    console.log('Spree Frontend initialized')\n  }\n}\n\n"],"names":["Controller","code","codeTarget","value","trim","this","initialize","apply","window","SpreeAPI","Storefront","applyCouponCode","handleSuccess","error","handleError","remove","removeCouponCode","element","classList","add","resultTextTarget","innerHTML","resultIconTarget","src","Spree","translations","coupon_code_error_icon","coupon_code_applied","location","reload","targets","Application","start","register","Controllers","console","log"],"mappings":"uEAG6BA,EAGnBC,WACN,YAAYC,WAAWC,MAAMC,OAGvBH,SAACE,GACPE,KAAKH,WAAWC,MAAQA,EAG1BG,cAMAC,QACOF,KAAKJ,MAEVO,OAAOC,SAASC,WAAWC,gBACzBN,KAAKJ,KACL,IAAMI,KAAKO,gBACVC,GAAUR,KAAKS,YAAYD,IAIhCE,SACEP,OAAOC,SAASC,WAAWM,iBACzBX,KAAKJ,KACL,IAAMI,KAAKO,gBACVC,GAAUR,KAAKS,YAAYD,IAIhCC,YAAYD,GACVR,KAAKJ,KAAO,KACZI,KAAKY,QAAQC,UAAUC,IAAI,SAC3Bd,KAAKe,iBAAiBF,UAAUC,IAAI,eACpCd,KAAKe,iBAAiBC,UAAYR,EAClCR,KAAKiB,iBAAiBC,IAAMC,MAAMC,aAAaC,uBAGjDd,gBACEP,KAAKJ,KAAO,KACZI,KAAKY,QAAQC,UAAUH,OAAO,SAC9BV,KAAKe,iBAAiBF,UAAUH,OAAO,eACvCV,KAAKiB,iBAAiBP,SACtBV,KAAKe,iBAAiBF,UAAUC,IAAI,iBACpCd,KAAKe,iBAAiBC,UAAYG,MAAMC,aAAaE,oBACrDnB,OAAOoB,SAASC,YAjDXC,QAAU,CAAE,OAAQ,aAAc,cCDvBC,EAAYC,QACpBC,SAAS,cAAeC,GAEpC,MAAe,CACbF,QACEG,QAAQC,IAAI"}