{"version":3,"file":"spree_frontend.umd.js","sources":["../app/javascript/controllers/coupon_code_controller.js","../app/javascript/index.js"],"sourcesContent":["import { Controller } from 'stimulus'\n// import { makeClient } from '@spree/storefront-api-v2-sdk/dist/client'\n\nexport default class extends Controller {\n  static targets = [ 'code', 'resultText', 'resultIcon' ]\n\n  get code() {\n    return this.codeTarget.value.trim()\n  }\n\n  set code(value) {\n    this.codeTarget.value = value\n  }\n\n  initialize() {\n    // this.apiClient = makeClient({\n    //   host: 'http://localhost:3000'\n    // })\n  }\n\n  apply() {\n    if (!this.code) return\n\n    window.SpreeAPI.Storefront.applyCouponCode(\n      this.code,\n      () => this.handleSuccess(),\n      (error) => this.handleError(error)\n    )\n  }\n\n  remove() {\n    window.SpreeAPI.Storefront.removeCouponCode(\n      this.code,\n      () => this.handleSuccess(),\n      (error) => this.handleError(error)\n    )\n  }\n\n  handleError(error) {\n    this.code = null\n    this.element.classList.add('error')\n    this.resultTextTarget.classList.add('alert-error')\n    this.resultTextTarget.innerHTML = error\n    this.resultIconTarget.src = Spree.translations.coupon_code_error_icon\n  }\n\n  handleSuccess() {\n    this.code = null\n    this.element.classList.remove('error')\n    this.resultTextTarget.classList.remove('alert-error')\n    this.resultIconTarget.remove()\n    this.resultTextTarget.classList.add('alert-success')\n    this.resultTextTarget.innerHTML = Spree.translations.coupon_code_applied\n    window.location.reload()\n  }\n}\n","import { Application } from \"stimulus\"\nimport * as Controllers from './controllers'\n\nconst application = Application.start()\napplication.register('coupon-code', Controllers.CouponCodeController)\n\nexport default {\n  start() {\n    console.log('Spree Frontend initialized')\n  }\n}\n\n"],"names":["initialize","apply","this","code","window","SpreeAPI","Storefront","applyCouponCode","_this","handleSuccess","error","handleError","remove","removeCouponCode","_this2","element","classList","add","resultTextTarget","innerHTML","resultIconTarget","src","Spree","translations","coupon_code_error_icon","coupon_code_applied","location","reload","codeTarget","value","trim","Controller","targets","Application","start","register","Controllers","console","log"],"mappings":"2hBAcEA,WAAA,eAMAC,MAAA,sBACOC,KAAKC,MAEVC,OAAOC,SAASC,WAAWC,gBACzBL,KAAKC,KACL,kBAAMK,EAAKC,iBACX,SAACC,UAAUF,EAAKG,YAAYD,QAIhCE,OAAA,sBACER,OAAOC,SAASC,WAAWO,iBACzBX,KAAKC,KACL,kBAAMW,EAAKL,iBACX,SAACC,UAAUI,EAAKH,YAAYD,QAIhCC,YAAA,SAAYD,GACVR,KAAKC,KAAO,KACZD,KAAKa,QAAQC,UAAUC,IAAI,SAC3Bf,KAAKgB,iBAAiBF,UAAUC,IAAI,eACpCf,KAAKgB,iBAAiBC,UAAYT,EAClCR,KAAKkB,iBAAiBC,IAAMC,MAAMC,aAAaC,0BAGjDf,cAAA,WACEP,KAAKC,KAAO,KACZD,KAAKa,QAAQC,UAAUJ,OAAO,SAC9BV,KAAKgB,iBAAiBF,UAAUJ,OAAO,eACvCV,KAAKkB,iBAAiBR,SACtBV,KAAKgB,iBAAiBF,UAAUC,IAAI,iBACpCf,KAAKgB,iBAAiBC,UAAYG,MAAMC,aAAaE,oBACrDrB,OAAOsB,SAASC,8BA/ClB,WACE,YAAYC,WAAWC,MAAMC,YAG/B,SAASD,GACP3B,KAAK0B,WAAWC,MAAQA,8LARCE,uBACpBC,QAAU,CAAE,OAAQ,aAAc,cCDvBC,cAAYC,QACpBC,SAAS,cAAeC,GAErB,CACbF,iBACEG,QAAQC,IAAI"}