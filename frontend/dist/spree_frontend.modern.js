import{Controller as e,Application as t}from"stimulus";class r extends e{get code(){return this.codeTarget.value.trim()}set code(e){this.codeTarget.value=e}initialize(){}apply(){this.code&&window.SpreeAPI.Storefront.applyCouponCode(this.code,()=>this.handleSuccess(),e=>this.handleError(e))}remove(){window.SpreeAPI.Storefront.removeCouponCode(this.code,()=>this.handleSuccess(),e=>this.handleError(e))}handleError(e){this.code=null,this.element.classList.add("error"),this.resultTextTarget.classList.add("alert-error"),this.resultTextTarget.innerHTML=e,this.resultIconTarget.src=Spree.translations.coupon_code_error_icon}handleSuccess(){this.code=null,this.element.classList.remove("error"),this.resultTextTarget.classList.remove("alert-error"),this.resultIconTarget.remove(),this.resultTextTarget.classList.add("alert-success"),this.resultTextTarget.innerHTML=Spree.translations.coupon_code_applied,window.location.reload()}}r.targets=["code","resultText","resultIcon"],t.start().register("coupon-code",r);var s={start(){console.log("Spree Frontend initialized")}};export default s;
//# sourceMappingURL=spree_frontend.modern.js.map
